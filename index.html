<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>area-viewer</title>
  <style>
    body{margin:0;font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto}
    .wrap{max-width:900px;margin:40px auto;padding:0 16px}
    .bar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    input,button{font:inherit;padding:8px 12px}
    .status{margin:12px 0;color:#555}
    pre{background:#f6f7f9;padding:12px;border-radius:8px;overflow:auto}
  </style>
  <script>
    // Optional globale Konfig (kann Cloudflare via <script> injizieren)
    window.__CONFIG = window.__CONFIG || {};
    // z.B. window.__CONFIG.SCENES_BASE = "https://cdn.jsdelivr.net/gh/<USER>/area-viewer@scenes/scenes";
  </script>

<script>
  const WORKER_BASE = "https://area-webar.workers.dev"; // dein Worker
  const params = new URL(location).searchParams;
  const sceneId = params.get('scene') || 'demo-hello-world';

  async function loadScene() {
    // 1) Szene-JSON vom Worker
    const sceneJsonUrl = `${WORKER_BASE}/scenes/${encodeURIComponent(sceneId)}/scene.json`;
    const scene = await fetch(sceneJsonUrl).then(r => {
      if (!r.ok) throw new Error('scene.json not found');
      return r.json();
    });

    // 2) GLB-URL aus demselben Ordner beim Worker
    const glbUrl = `${WORKER_BASE}/scenes/${encodeURIComponent(sceneId)}/scene.glb`;

    // TODO: hier deinen bestehenden GLTFLoader / Drei.js Code aufrufen
    // loader.load(glbUrl, (gltf) => { ... render ... });
  }
  window.addEventListener('DOMContentLoaded', loadScene);
</script>

  
</head>
<body>
  <div class="wrap">
    <h1>area-viewer</h1>
    <div class="bar">
      <label for="sceneId">Scene ID:</label>
      <input id="sceneId" placeholder="demo-hello-world" />
      <button id="loadBtn">Laden</button>
      <button id="shareBtn">Link kopieren</button>
    </div>
    <div class="status" id="status">Bereit.</div>
    <pre id="out" aria-live="polite"></pre>
  </div>

  <script type="module" src="./main.js"></script>
</body>
</html>
