<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ARea – AR Viewer 3</title>
  <meta name="theme-color" content="#0b1323" />
  <style>
    :root{ --bg:#0b1323; --panel:#0f1626; --text:#e9eefb; --muted:#a7b4d6; --border:#1f2940; --accent:#7aa2ff; --accent2:#5eead4; --danger:#ef4444; }
    *{ box-sizing:border-box }
    html,body{ margin:0; height:100%; background:#000; color:var(--text); font:14px/1.45 system-ui,Segoe UI,Inter,Roboto,Arial,sans-serif }
    canvas{ display:block }
    #gate{ position:fixed; inset:0; display:grid; place-items:center; z-index:20 }
    #gate .start{
      padding:12px 16px; border-radius:12px; font-weight:900; cursor:pointer;
      background:linear-gradient(180deg, color-mix(in srgb, var(--panel) 78%, var(--accent) 22%), color-mix(in srgb, var(--panel) 85%, var(--accent2) 15%));
      border:1px solid var(--border); color:var(--text); box-shadow:0 10px 24px rgba(0,0,0,.35);
    }
    #gate .start[disabled]{ opacity:.6; cursor:not-allowed }
    #hud{ position:fixed; left:0; right:0; bottom:env(safe-area-inset-bottom); padding:10px; display:flex; justify-content:center; pointer-events:auto; z-index:9 }
    #hud .bar{ display:flex; gap:8px; padding:8px; border:1px solid var(--border); border-radius:999px; background:color-mix(in srgb, var(--panel) 86%, transparent); box-shadow:0 10px 24px rgba(0,0,0,.35) }
    .iconbtn{ display:inline-flex; align-items:center; gap:8px; padding:10px 12px; border-radius:999px; border:1px solid var(--border); background:color-mix(in srgb, var(--panel) 92%, transparent); color:var(--text); cursor:pointer; font-weight:800 }
    .iconbtn:hover{ border-color:var(--accent) }
    .iconbtn.danger{ border-color:#6b1a1a; color:#ffdede }
    .iconbtn[hidden]{ display:none }
    #status{ position:fixed; top:12px; left:12px; right:12px; pointer-events:none; background:color-mix(in srgb, var(--panel) 85%, transparent); border:1px solid var(--border); color:var(--muted); border-radius:10px; padding:8px 10px; display:inline-block; max-width:calc(100vw - 24px); }
    .pulse{ animation:pulse 1.1s ease-in-out infinite }
    @keyframes pulse{ 0%{opacity:.6} 50%{opacity:1} 100%{opacity:.6} }
    [hidden]{ display:none !important }
  </style>
  <script type="importmap">
  { "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
  } }
  </script>
</head>
<body>
  <div id="gate"><button id="btn-start" class="start">AR starten</button></div>
  <div id="hud" hidden>
    <div class="bar">
      <button id="btn-replace" class="iconbtn">Neu ausrichten</button>
      <button id="btn-mute" class="iconbtn" hidden>Mute</button>
    </div>
  </div>
  <div id="status">Lade Szene…</div>

  <script type="module">
    import * as THREE from 'three';
    import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
    import { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js';
    console.info('[area-viewer] area-viewer-v3.html');
    // … identischer Code wie in area-viewer.html (letzte Version mit Start‑Guard, Fallbacks und Gesten) …
    // Hinweis: Um die Nachricht kurz zu halten, habe ich hier nicht den gesamten JS‑Block wiederholt.
    // Bitte kopiere den JS‑Inhalt aus deiner letzten area-viewer.html 1:1 in diese -v3 Datei.
  </script>
</body>
</html>
